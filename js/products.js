const products = [
  {
    id: 100,
    name: "Pallet Gù Gỗ Thông 4 Hướng  Xe Nâng",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/11-4152.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 101,
    name: "Pallet Gù Gỗ Tràm 4 Hướng",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/10-5822.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 102,
    name: "Pallet Gỗ Tràm 3 Đố 4 Hướng ( 585 x 1606 x 120mm )",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/9-9388.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 103,
    name: "Pallet Ván Ép Xuất Khẩu 4 Hướng Xe Nâng ( 1220 x 1500 x 120mm )",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/8-8174.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 104,
    name: "Pallet Ván Ép 4 Hướng Xe Nâng (1200 x 1200 x 120mm)",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/7-4211.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 105,
    name: "Pallet Gỗ Tràm 3 Đố 2 Hướng Xe Nâng",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/6-6597.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 106,
    name: "Pallet Gỗ Tràm 3 Đố 4 Hướng",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/5-8988.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 107,
    name: "Pallet Gỗ Thông 3 Đố 4 Hướng Xe Nâng",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/4-3247.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 111,
    name: "Ván Ép Tái Sử Dụng thanh Lý",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/3-1816.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 112,
    name: "Ván Ép Tái Sử Dụng Thanh Lý (Đủ Các Loại Quy Cách)",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/1-8407.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 113,
    name: "Ván Ép 1220 x 2440x 15mm",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/4-4642.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 114,
    name: "Pallet Nhựa Bình Dương",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/11-8473.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 115,
    name: "Pallet Nhựa Tân Uyên",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/10-4226.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 116,
    name: "Pallet Xuất Khẩu Thủ Dầu Một",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/9-4899.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 117,
    name: "Pallet Xuất Khẩu Bàu Bàng",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/8-9659.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 118,
    name: "Pallet Xuất Khẩu Giá Rẻ Bình Dương",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/7-3077.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 119,
    name: "Pallet Xuất Khẩu Thuận An",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/6-7172.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 120,
    name: "Pallet Xuất Khẩu Dĩ An",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/5-7795.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 121,
    name: "Pallet Xuất Khẩu Tân Uyên",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/4-5350.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 122,
    name: "Pallet Ván Ép Bình Dương",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/3-6208.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 123,
    name: "Pallet Ván Ép Dĩ An",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/2-1005.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 124,
    name: "Pallet Ván Ép Tân Uyên",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/1-2849.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 125,
    name: "Ván Công Nghiệp Tân Uyên",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/8-1427.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 127,
    name: "Ván Công Nghiệp Bình Dương",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/6-2950.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 128,
    name: "Pallet Giá Rẻ",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/5-7853.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 130,
    name: "Gỗ Pallet Giá Rẻ",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/3-7636.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 131,
    name: "Gỗ Pallet Tân Uyên",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/2-5201.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 132,
    name: "Gỗ Pallet",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/1-1597.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 133,
    name: "Pallet Xuất Khẩu",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/f91d8bb5-ecf3-4d55-8b7e-2b44e9dfc7c9-2333.jpeg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 135,
    name: "Ván Công Nghiệp Bình Dương",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/5adb190f-8d03-4d56-82e2-698f882dcd5b-4924.jpeg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 136,
    name: "Gỗ Tràm Các Loại Và Đủ Các Quy Cách",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/71666bf9-5cb6-47e5-912b-253ad1b54514-3330.jpeg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 137,
    name: "Gỗ Nan Thông",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/fef0c8a7-9b13-41b6-aa6a-48f91f870aa6-5136.jpeg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 138,
    name: "Ván Công Nghiệp Các Loại",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/a897659b-5d66-44c6-9822-bda18a0872ad-9037.jpeg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 141,
    name: "Ván Ép Okal",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/7d091492-60fd-4c1e-90c3-7fac367ce214-9326.jpeg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 142,
    name: "Ván Ép MDF",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/fbc1e2fe-3ab4-4310-b0b4-daf5298719d6-3678.jpeg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 143,
    name: "Ván Ép",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/1dca429f-f571-4728-853d-d282ecaa1de5-7434.jpeg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 144,
    name: "Ván MDF",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/e9bf85e9-9361-46d1-8e95-4bcf865bbdb3-7269.jpeg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 146,
    name: "Gỗ Thông Giá Rẻ Bình Dương",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/2af7fe31-251a-4492-87b7-957bc584ecf2-2851.jpeg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 148,
    name: "Gỗ Thông Bình Dương",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/3-7192.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 151,
    name: "Gỗ Thông Minh Khôi Phát",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/6-3364.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 152,
    name: "Gỗ Cao Su Tân Uyên",
    image:
      "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/7-2437.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 162,
    name: "Gỗ Cao Su",
    image: "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/12-9640.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 164,
    name: "Gỗ Tràm Tân Uyên",
    image: "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/18-8595.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 165,
    name: "Gỗ Tràm Minh Khôi Phát",
    image: "https://palletgiarebinhduong.vn/watermark/product/540x540x1/upload/product/6-3364.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 166,
    name: "Gỗ Tràm Bình Dương",
    image: "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/20-6222.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 170,
    name: "Pallet Ván Ép",
    image: "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/8-4702.jpg",
    description: "",
    price: "Liên hệ",
  },
  {
    id: 171,
    name: "Pallet Kê Kho",
    image: "https://palletgiarebinhduong.vn/watermark/product/285x285x2/upload/product/7-9887.jpg",
    description: "",
    price: "Liên hệ",
  },
];

const productList = document.getElementById("product-list");
const searchBox = document.getElementById("searchBox");

const fuse = new Fuse(products, {
  keys: ["name", "description"],
  threshold: 0.4,
});

function render(productsToRender) {
  productList.innerHTML = productsToRender
    .map(
      (p) => `
  <div class="product">
    <a href="product.html?id=${p.id}" class="product-image">
      <img src="${p.image}" alt="${p.name}" />
    </a>
    <div class="product-info">
      <a href="product.html?id=${p.id}">${p.name}</a>
      <p>${p.description}</p>
      <a href="tel:0966799997">Giá: <span>${p.price}</span></a>
    </div>
  </div>
`
    )
    .join("");
}

render(products);

document.querySelectorAll("#searchBoxHeader, #searchBox").forEach((input) => {
  input.addEventListener("input", function () {
    const query = this.value.trim();
    const results = query ? fuse.search(query).map((r) => r.item) : products;
    render(results);

    const target = document.getElementById("products");
    const y = target.getBoundingClientRect().top + window.pageYOffset - 60;
    window.scrollTo({ top: y, behavior: "smooth" });
  });
});

// check current url, if is contain /product.html?id=XXX
if (window.location.pathname.includes("/product.html")) {
  const urlParams = new URLSearchParams(window.location.search);
  const id = urlParams.get("id");
  const product = products.find((p) => p.id === parseInt(id));
  if (product) {
    document.getElementById("mainImage").src = product.image;
    document.getElementById("productCode").textContent = "Mã: " + product.id;
    document.getElementById("productName").textContent = product.name;
    document.getElementById("productDescription").innerHTML = product.description;
    document.getElementById("productState").textContent = "Tình trạng: Còn hàng";
  }
}

// add event click to .product-page .product-images ::after element, href to tel:0966799997
document.querySelector(".product-page .product-images ::after").addEventListener("click", function () {
  window.open("tel:0966799997", "_blank");
});

